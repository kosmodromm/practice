var global;global=(()=>{var __webpack_modules__={8:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "H9": () => /* binding */ getSummaryCovid,\n/* harmony export */   "E6": () => /* binding */ getByDateCovid,\n/* harmony export */   "oU": () => /* binding */ getByDateWorld,\n/* harmony export */   "NU": () => /* binding */ getTotal\n/* harmony export */ });\nlet summaryCache = null;\r\nlet countryCache = {};\r\nlet worldCache = null;\r\n\r\nconst summaryUrl = `https://disease.sh/v3/covid-19/countries?sort=cases`;\r\nconst byDateUrl = `https://disease.sh/v3/covid-19/historical/[country]?lastdays=all`;\r\nconst byDateAllCountries = `https://disease.sh/v3/covid-19/historical/all?lastdays=all`;\r\n\r\nasync function getSummaryCovid(useCache = true) {\r\n    if (summaryCache && useCache) {\r\n        return summaryCache;\r\n    }\r\n    const url = summaryUrl;\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n    summaryCache = data;\r\n    return data;\r\n}\r\n\r\nasync function getByDateCovid(country, useCache = true) {\r\n    if (countryCache[country] && useCache) {\r\n        return countryCache[country];\r\n    }\r\n    const url = byDateUrl.replace(\'[country]\', country);\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n    countryCache[country] = data;\r\n    return data;\r\n}\r\n\r\nasync function getByDateWorld(useCache = true) {\r\n    if (worldCache && useCache) {\r\n        return worldCache;\r\n    }\r\n    const url = byDateAllCountries;\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n    worldCache = data;\r\n    console.log(data);\r\n    return data;\r\n}\r\n\r\n\r\nfunction getTotal(data, param) {\r\n    let source = data.timeline || data;\r\n    let total = source[param];\r\n    let maxValue = Math.max(...Object.values(total));\r\n    return maxValue;\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://global/./Covid-dashboard/components/api.js?')},467:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8);\n/* harmony import */ var _event_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(567);\n\r\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", async function () {\r\n\r\n    _event_manager__WEBPACK_IMPORTED_MODULE_1__/* .eventManager.subscribe */ .$.subscribe('countryChange', initChart);\r\n\r\n    initChart();\r\n}\r\n);\r\n\r\nfunction formatData(data) {\r\n    const source = data.timeline || data;\r\n    return {\r\n        cases: formatParam(source.cases),\r\n        deaths: formatParam(source.deaths),\r\n        recovered: formatParam(source.recovered),\r\n    };\r\n}\r\n\r\n\r\nfunction formatParam(source) {\r\n    return Object.keys(source).map((e) => {\r\n        return {\r\n            x: Date.parse(e),\r\n            y: source[e],\r\n        }\r\n    });\r\n}\r\n\r\nfunction initChart(country) {\r\n    const get = country ? _api__WEBPACK_IMPORTED_MODULE_0__/* .getByDateCovid */ .E6 : _api__WEBPACK_IMPORTED_MODULE_0__/* .getByDateWorld */ .oU;\r\n    get(country).then(function (data) {\r\n        const formattedData = formatData(data);\r\n        drowChart(formattedData);\r\n    }).catch(function () {\r\n        drowChart({ cases: [], deaths: [], recovered: [] })\r\n    })\r\n\r\n}\r\n\r\nfunction drowChart(data) {\r\n    Highcharts.chart('graph', {\r\n        chart: {\r\n            zoomType: 'x',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        title: {\r\n            text: 'Cases over time'\r\n        },\r\n        subtitle: {\r\n            text: document.ontouchstart === undefined ?\r\n                'Click and drag in the plot area to zoom in' : 'Pinch the chart to zoom in'\r\n        },\r\n        xAxis: {\r\n            type: 'datetime'\r\n        },\r\n        yAxis: {\r\n            title: {\r\n                text: 'Amount'\r\n            },\r\n            max: null,\r\n            endOnTick: false,\r\n        },\r\n        legend: {\r\n            enabled: false,\r\n        },\r\n        plotOptions: {\r\n            area: {\r\n                marker: {\r\n                    radius: 2\r\n                },\r\n                lineWidth: 1,\r\n                states: {\r\n                    hover: {\r\n                        lineWidth: 1\r\n                    }\r\n                },\r\n                threshold: null\r\n            }\r\n        },\r\n\r\n        series: [{\r\n            type: 'area',\r\n            data: data.cases,\r\n            color: '#FC2',\r\n            name: 'Cases',\r\n        },\r\n        {\r\n            type: 'area',\r\n            data: data.deaths,\r\n            color: '#FF0000',\r\n            name: 'Deaths'\r\n        },\r\n        {\r\n            type: 'area',\r\n            data: data.recovered,\r\n            color: '#888',\r\n            name: 'Recovered'\r\n\r\n        }]\r\n    });\r\n}\n\n//# sourceURL=webpack://global/./Covid-dashboard/components/chart.js?")},141:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8);\n/* harmony import */ var _event_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(567);\n\r\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", async function () {\r\n    const data = await (0,_api__WEBPACK_IMPORTED_MODULE_0__/* .getSummaryCovid */ .H9)();\r\n    const listAll = document.querySelector('[data-name=\"list-all-time\"]');\r\n    const listLast = document.querySelector('[data-name=\"list-last-day\"]');\r\n\r\n    for (let i = 0; i < data.length; i++) {\r\n        listAll.appendChild(createListElem(data[i].country, data[i].countryInfo.iso2, data[i].cases, data[i].countryInfo.flag));\r\n    }\r\n\r\n    data.sort((a, b) => b.todayCases - a.todayCases);\r\n\r\n    for (let i = 0; i < data.length; i++) {\r\n        listLast.appendChild(createListElem(data[i].country, data[i].countryInfo.iso2, data[i].todayCases, data[i].countryInfo.flag));\r\n    }\r\n\r\n    const input = document.querySelector('input');\r\n    input.addEventListener('input', function () {\r\n        const listArr = listAll.classList.contains('hidden') ? listLast.querySelectorAll('li') : listAll.querySelectorAll('li');\r\n        for (let i = 0; i < listArr.length; i++) {\r\n            if (listArr[i].querySelector('b').innerText.toLowerCase().indexOf(input.value.toLowerCase()) === -1) {\r\n                listArr[i].style.display = 'none';\r\n            } else {\r\n                listArr[i].style.display = 'block';\r\n            }\r\n        }\r\n    })\r\n});\r\n\r\nfunction createListElem(country, code, cases, flag) {\r\n    const el = document.createElement('li');\r\n    const btn = document.createElement('button');\r\n    btn.innerHTML = `<b><img src=\"${flag}\" alt=\"${code}\">${country}</b>${cases}`;\r\n    el.appendChild(btn);\r\n    el.addEventListener('click', function (event) {\r\n        _event_manager__WEBPACK_IMPORTED_MODULE_1__/* .eventManager.trigger */ .$.trigger('countryChange', [code]);\r\n    })\r\n    return el;\r\n}\r\n\n\n//# sourceURL=webpack://global/./Covid-dashboard/components/countries.js?")},239:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8);\n/* harmony import */ var _event_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(567);\n\r\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n    let currentCountry = '';\r\n    let currentPeriod = 'all-time';\r\n    let currentPopulation = 'total';\r\n\r\n    const countryStats = document.querySelector('.stats-country');\r\n    const casesStats = document.querySelector('.stats-cases');\r\n    const deathsStats = document.querySelector('.stats-deaths');\r\n    const recoveredStats = document.querySelector('.stats-recovered');\r\n\r\n    _event_manager__WEBPACK_IMPORTED_MODULE_1__/* .eventManager.subscribe */ .$.subscribe('countryChange', function (country) {\r\n        currentCountry = country;\r\n        getStats();\r\n    });\r\n\r\n    getStats();\r\n\r\n    async function getStats() {\r\n        const get = currentCountry ? _api__WEBPACK_IMPORTED_MODULE_0__/* .getSummaryCovid */ .H9 : _api__WEBPACK_IMPORTED_MODULE_0__/* .getByDateWorld */ .oU;\r\n        const data = await get();\r\n        let paramNames = currentPeriod === 'last-day' ? {\r\n            cases: 'todayCases',\r\n            deaths: 'todayDeaths',\r\n            recovered: 'todayRecovered'\r\n        } : {\r\n                cases: 'cases',\r\n                deaths: 'deaths',\r\n                recovered: 'recovered'\r\n            }\r\n\r\n        if (currentCountry) {\r\n            const country = data.find((e) => e.countryInfo.iso2 === currentCountry);\r\n            let cases = country[paramNames.cases];\r\n            let deaths = country[paramNames.deaths];\r\n            let recovered = country[paramNames.recovered];\r\n\r\n            if (currentPopulation === 'per-100k') {\r\n                cases = Math.round(cases / country.population * 100000);\r\n                deaths = Math.round(deaths / country.population * 100000);\r\n                recovered = Math.round(recovered / country.population * 100000);\r\n            }\r\n\r\n            countryStats.innerText = country.country || 'All world';\r\n            casesStats.innerHTML = `${cases} <span>cases</span>`;\r\n            deathsStats.innerHTML = `${deaths} <span>deaths</span>`;\r\n            recoveredStats.innerHTML = `${recovered} <span>recovered</span>`;\r\n        } else {\r\n            countryStats.innerText = 'All world';\r\n            casesStats.innerHTML = `${(0,_api__WEBPACK_IMPORTED_MODULE_0__/* .getTotal */ .NU)(data, 'cases')} <span>cases</span>`;\r\n            deathsStats.innerHTML = `${(0,_api__WEBPACK_IMPORTED_MODULE_0__/* .getTotal */ .NU)(data, 'deaths')} <span>deaths</span>`;\r\n            recoveredStats.innerHTML = `${(0,_api__WEBPACK_IMPORTED_MODULE_0__/* .getTotal */ .NU)(data, 'recovered')} <span>recovered</span>`;\r\n        }\r\n    }\r\n\r\n    const tableBtns = [...document.querySelectorAll('.table-btns button')];\r\n    for (let i = 0; i < tableBtns.length; i++) {\r\n        const period = tableBtns[i].getAttribute('data-period');\r\n        const population = tableBtns[i].getAttribute('data-population');\r\n        tableBtns[i].addEventListener('click', () => {\r\n            currentPeriod = period || currentPeriod;\r\n            currentPopulation = population || currentPopulation;\r\n            getStats();\r\n            const sameBtns = [...tableBtns[i].parentElement.children];\r\n            sameBtns.forEach((e) => e.classList.remove('active'));\r\n            tableBtns[i].classList.add('active');\r\n        }\r\n        );\r\n    }\r\n})\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://global/./Covid-dashboard/components/country-stats.js?")},567:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "$": () => /* binding */ eventManager\n/* harmony export */ });\nconst eventManager = {\n    listeners: {},\n    subscribe: function (eventName, fn) {\n        if (!this.listeners[eventName]) {\n            this.listeners[eventName] = [];\n        }\n        this.listeners[eventName].push(fn);\n    },\n    trigger: function (eventName, params) {\n        if (!this.listeners[eventName]) {\n            return;\n        }\n        this.listeners[eventName].forEach((e) => e(...params));\n    }\n};\n\n\n\n\n//# sourceURL=webpack://global/./Covid-dashboard/components/event-manager.js?')},511:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8);\n\n\nconst actualUpdate = document.querySelector('.actual-update');\n\nasync function getUpdateTime() {\n    const data = await (0,_api__WEBPACK_IMPORTED_MODULE_0__/* .getByDateWorld */ .oU)();\n    const dataCases = Object.keys(data.cases);\n    actualUpdate.innerHTML = `Last update: ${dataCases[dataCases.length - 1]}`;\n}\n\ngetUpdateTime();\n\n//# sourceURL=webpack://global/./Covid-dashboard/components/init.js?")},984:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8);\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", async function () {\r\n    const data = await (0,_api__WEBPACK_IMPORTED_MODULE_0__/* .getSummaryCovid */ .H9)();\r\n    const formattedData = formatData(data);\r\n\r\n    const mapBtns = [...document.querySelectorAll('.map-btns button')];\r\n    for (let i = 0; i < mapBtns.length; i++) {\r\n        const param = mapBtns[i].getAttribute('data-param');\r\n        mapBtns[i].addEventListener('click', () => {\r\n            mapInit(formattedData[param], param);\r\n            mapBtns.forEach((e) => e.classList.remove('active'));\r\n            mapBtns[i].classList.add('active');\r\n        }\r\n        );\r\n    }\r\n\r\n    mapInit(formattedData.cases, 'cases');\r\n\r\n});\r\n\r\nfunction formatData(data) {\r\n    return {\r\n        cases: formatParam(data, 'cases'),\r\n        deaths: formatParam(data, 'deaths'),\r\n        recovered: formatParam(data, 'recovered'),\r\n    };\r\n}\r\n\r\nfunction formatParam(data, param) {\r\n    return data.map((e) => {\r\n        return {\r\n            name: e.country,\r\n            value: e[param],\r\n            code: e.countryInfo.iso2,\r\n        };\r\n    });\r\n}\r\n\r\nfunction mapInit(data, param) {\r\n    Highcharts.mapChart('map-chart', {\r\n        chart: {\r\n            backgroundColor: '#22272b',\r\n            map: 'custom/world-highres'\r\n        },\r\n\r\n        title: {\r\n            text: 'Zoom in on country by double click'\r\n        },\r\n\r\n        mapNavigation: {\r\n            enabled: true,\r\n            enableDoubleClickZoomTo: true\r\n        },\r\n\r\n        colorAxis: {\r\n            minColor: '#9cd479',\r\n            maxColor: '#d9434d',\r\n            min: 0,\r\n        },\r\n\r\n        series: [{\r\n            data: data,\r\n            joinBy: ['iso-a2', 'code'],\r\n            name: `COVID ${param}`,\r\n            states: {\r\n                hover: {\r\n                    color: '#e5e5e5'\r\n                }\r\n            },\r\n        }]\r\n    });\r\n}\n\n//# sourceURL=webpack://global/./Covid-dashboard/components/map.js?")},982:()=>{eval("document.addEventListener(\"DOMContentLoaded\", function () {\n    const lastDayTab = document.querySelector('#radio-1');\n    const allTimeTab = document.querySelector('#radio-2');\n    lastDayTab.addEventListener('change', tabSelection);\n    allTimeTab.addEventListener('change', tabSelection);\n})\n\nfunction tabSelection() {\n    const listAll = document.querySelector('[data-name=\"list-all-time\"]');\n    const listLast = document.querySelector('[data-name=\"list-last-day\"]');\n    listAll.classList.toggle('hidden');\n    listLast.classList.toggle('hidden');\n}\n\n\n\n//# sourceURL=webpack://global/./Covid-dashboard/components/radio-btns.js?")},148:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{eval("__webpack_require__(984);\r\n__webpack_require__(467);\r\n__webpack_require__(141);\r\n__webpack_require__(239);\r\n__webpack_require__(511);\r\n__webpack_require__(982)\n\n//# sourceURL=webpack://global/./Covid-dashboard/components/script.js?")}},__webpack_module_cache__={};function __webpack_require__(r){if(__webpack_module_cache__[r])return __webpack_module_cache__[r].exports;var e=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r](e,e.exports,__webpack_require__),e.exports}return __webpack_require__.d=(r,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),__webpack_require__.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},__webpack_require__(148)})();